@page "/"
@using DartsScoreboardGames.Components.Pages.Screens.Games
@using DartsScoreboardGames.Services.Games

@inject GameStateProvider GameStateProvider 

@switch (GameStateProvider.CurrentGame) {
    case var e when e is GameSelection:
        <GameSelectScreen />
        break;
    case var e when e is StandardGame:
        <StandardGameScreen />
        break;
    case var e when e is KillerGame:
        <KillerGameScreen />
        break;
    case var e when e is MathsGame:
        <MathsGameScreen />
        break;
    default:
        <LandingScreen />
        break;
}

@code {
    protected override void OnInitialized() {
        GameStateProvider.OnGameStateChanged += ChangeHandler;
    }

    public void Dispose() {
        GameStateProvider.OnGameStateChanged -= ChangeHandler;

    }

    private async void ChangeHandler(object? sender, EventArgs e) =>
        await InvokeAsync(StateHasChanged);

}
